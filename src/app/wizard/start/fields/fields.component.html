<ng-template #itemTemplate let-item="item" let-onCollapseExpand="onCollapseExpand" let-onCheckedChange="onCheckedChange">
    <div class="form-check">
        <label class="form-check-label">
          <mat-checkbox class="form-check-input" [(ngModel)]="item.checked" (ngModelChange)="onCheckedChange()"
                  [indeterminate]="item.indeterminate" > {{item.text}}
          </mat-checkbox>
        </label>
        <label *ngIf="item.children" class="form-check-label float-right" (click)="onArrowClicked(item)">
            <label> {{item.children.length}} SUB-CATEGORIES</label>
            <svg-icon [src]="!item.collapsed?'assets/icon-arrow-up.svg':'assets/icon-arrow-down.svg'"></svg-icon>
        </label>
    </div>
</ng-template>

<div class="wizard-container" [@slide]='state' (@slide.done)="navigate($event)">
  <div class="page-title col-12 text-center">
      Define the area of your research
  </div>
  <div class="d-flex">

    <div class="page-sub-title col-6">
      Category
      <nb-card>
        <nb-card-body>
          <ngx-treeview [config]="config" [itemTemplate]="itemTemplate" [items]="categories"></ngx-treeview>
        </nb-card-body>
        <nb-card-footer>
          <div class="d-flex">
            <div class="btn ittweb-btn col-4 small" (click)="onInvertClick()">
              Invert Selection
            </div>
            <div class="btn ittweb-btn col-4 small" (click)="onDeselectClick()">
            Deselect All
          </div>
            <div class="btn ittweb-btn col-4 small" (click)="onSelectClick()">
              Select All
            </div>
          </div>
        </nb-card-footer>
      </nb-card>
    </div>

    <div class="page-sub-title col-6">
      SKU
      <nb-card>
        <nb-card-body>
          <ul class="list-group">
            <li *ngFor="let sku of skus | orderBy: '':false:'case-insensitive':customComparator | onlyChecked" class="list-group-item">

                {{ sku.value  }} {{sku.isMain?' - MAIN':''}}
            </li>
          </ul>
        </nb-card-body>
        <nb-card-footer>
          <div class="btn ittweb-btn float-right small" (click)="modalShowSku()"> SELECT </div>
        </nb-card-footer>
      </nb-card>
    </div>
  </div>
  <div class="d-flex">

    <div class="page-sub-title col-6">
      Query
      <nb-card>
        <nb-card-body>
          <ul class="list-group">
            <li *ngFor="let query of queries | onlyChecked" class="list-group-item">
              {{ query.value }}
            </li>
          </ul>
        </nb-card-body>
        <nb-card-footer>
          <div class="btn ittweb-btn float-right small" (click)="modalShowQuery()"> SELECT </div>
        </nb-card-footer>
      </nb-card>
    </div>

    <div class="page-sub-title col-6">
      Facets
      <nb-card>
        <nb-card-body>
          <ul class="list-group">
            <li *ngFor="let facet of facets | onlyChecked" class="d-flex list-group-item">
              <div class="col-2">{{facet.value}}</div>
              <select [(ngModel)]="facet.type" class="wizard-dropdown col-4 form-control input-sm">
                <option *ngFor="let facetType of facetTypes" [ngValue]="facetType" [selected]="facetType == facet.type">{{facetType}}</option>
              </select>
              <div *ngIf="facet.type=='slider'" class="col-6 d-flex">
                Min <input class="form-control input-sm" type="text"> Max <input type="text" class="form-control input-sm">
              </div>
            </li>
          </ul>
        </nb-card-body>
        <nb-card-footer>
          <div class="btn ittweb-btn float-right small" (click)="modalShowFacets()"> SELECT </div>
        </nb-card-footer>
      </nb-card>
    </div>
  </div>
  <div>
    <!--<button role="button" class="btn ittweb-back-btn" (click)="slideOutRight()">BACK</button>-->
    <button role="button" class="btn ittweb-btn next" (click)="slideOutLeft()">NEXT</button>
  </div>
</div>
